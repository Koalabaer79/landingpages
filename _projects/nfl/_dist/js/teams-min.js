var defaultYear="2020";function getTeams(e){$.getJSON("./assets/teams/"+e+".json",function(e){for(var t=["afc_east","afc_west","afc_north","afc_south","nfc_east","nfc_west","nfc_north","nfc_south"],n=["east","west","north","south","east","west","north","south"],s=0;s<t.length;s++)window[t[s]]=[];for(s=0;s<e.length;++s){var a=[],o=parseInt(e[s].standings.s)+parseInt(e[s].standings.n)+parseInt(e[s].standings.u),l=100*parseInt(e[s].standings.s)/o/100;l=isNaN(l)?0:l.toFixed(3);for(var i="<tr class='teams' id='"+e[s].name+"'><td><img class='smallImg' id='img"+s+"' src='assets/teams/logos/20x20/"+e[s].name.toLowerCase()+".png' /></td><td class='teamListed' id='name"+s+"'>"+e[s].full_name+"</td><td class='data'>"+o+"</td><td class='data'>"+e[s].standings.s+"</td><td class='data'>"+e[s].standings.n+"</td><td class='data'>"+e[s].standings.u+"</td><td class='data'>"+l+"</td><td class='data'>"+e[s].standings.p+"</td><td class='data'>"+e[s].standings.gp+"</td></tr>",c=0;c<t.length;c++){var r="";r=c<t.length/2?"afc":"nfc",e[s].conference==r&&e[s].division==n[c]&&(a.push(e[s].name),a.push(i),a.push(e[s].standings.s),a.push(e[s].standings.p),window[t[c]].push(a))}}for(var d=[window.afc_east,window.afc_west,window.afc_north,window.afc_south,window.nfc_east,window.nfc_west,window.nfc_north,window.nfc_south],h=[],g=0;g<d.length;g++)h.push(sortCat(d[g]));for(g=0;g<h.length;g++)for(var f=0;f<h[g].length;f++)$(h[g][f][1]).appendTo("#"+t[g])})}function sortCat(e){return e.sort(function(e,t){return t[2]-e[2]||t[3]-e[3]}),e}function showTable(e){var t=document.getElementById(e),n=document.getElementById("arrow"+e);"0px"==t.style.height||""==t.style.height?(t.style.height="200px",n.style.transform="rotate(-270deg)"):(t.style.height="0px",n.style.transform="rotate(-90deg)")}function showAll(){for(var e=["afcEast","afcWest","afcNorth","afcSouth","nfcEast","nfcWest","nfcNorth","nfcSouth"],t=0;t<e.length;t++){var n=document.getElementById(e[t]),s=document.getElementById("arrow"+e[t]),a=document.getElementById("unfold");"0px"==n.style.height||""==n.style.height?(n.style.height="200px",s.style.transform="rotate(-270deg)",a.innerHTML="Fold all"):(n.style.height="0px",s.style.transform="rotate(-90deg)",a.innerHTML="Unfold all")}}function openAll(){for(var e=["afcEast","afcWest","afcNorth","afcSouth","nfcEast","nfcWest","nfcNorth","nfcSouth"],t=0;t<e.length;t++){var n=document.getElementById(e[t]),s=document.getElementById("arrow"+e[t]),a=document.getElementById("unfold");n.style.height="200px",s.style.transform="rotate(-270deg)",a.innerHTML="Fold all"}}function changeSeason(e){$.getJSON("./assets/teams/"+e+".json",function(e){for(var t=0;t<e.length;++t)el=document.getElementById(e[t].code.toLowerCase()),el.remove()});var t=document.getElementById("filterSelect");t.setAttribute("onchange","getTeamMatches("+e+",this.value)"),t.selectedIndex=0,getTeams(e)}function setSeasons(){$.getJSON("./assets/seasons/seasons.json",function(e){var t,n,s,a,o,l,i,c,r=defaultYear,d='<option value="">Select Season</option>';$(d).appendTo("#year");for(var h=0;h<e.length;++h){var g="";r==e[h]&&(g="selected"),d='<option value="'+e[h]+'" '+g+">"+e[h]+"-"+(+e[h]+1)+"</option>",$(d).appendTo("#year")}for(s=(t=document.getElementsByClassName("custom-select")).length,h=0;h<s;h++){for(a=(o=t[h].getElementsByTagName("select")[0]).length,(l=document.createElement("DIV")).setAttribute("class","select-selected"),l.innerHTML=o.options[o.selectedIndex].innerHTML,t[h].appendChild(l),(i=document.createElement("DIV")).setAttribute("class","select-items select-hide"),n=1;n<a;n++)(c=document.createElement("DIV")).innerHTML=o.options[n].innerHTML,c.setAttribute("onclick","changeSeason('"+o.options[n].innerHTML.substring(0,4)+"')"),c.addEventListener("click",function(e){var t,n,s,a,o,l,i;for(l=(a=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,o=this.parentNode.previousSibling,n=0;n<l;n++)if(a.options[n].innerHTML==this.innerHTML){for(a.selectedIndex=n,o.innerHTML=this.innerHTML,i=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<i;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}o.click()}),i.appendChild(c);t[h].appendChild(i),l.addEventListener("click",function(e){e.stopPropagation(),f(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function f(e){var t,n,s,a,o,l=[];for(t=document.getElementsByClassName("select-items"),n=document.getElementsByClassName("select-selected"),a=t.length,o=n.length,s=0;s<o;s++)e==n[s]?l.push(s):n[s].classList.remove("select-arrow-active");for(s=0;s<a;s++)l.indexOf(s)&&t[s].classList.add("select-hide")}document.addEventListener("click",f),createFilter(r),getTeams(r)})}function createFilter(e){$.getJSON("./assets/teams/"+e+".json",function(e){for(var t='<select class="filter" id="filterSelect" onchange="highlightTeam(this.value)"><option value="">... filter</option>',n=[],s=0;s<e.length;s++)n.push(e[s].name);n.sort();for(s=0;s<n.length;s++)t+='<option value="'+n[s]+'">'+n[s]+"</option>";t+="</select>",$(t).appendTo("#filter")})}function highlightTeam(e){var t=document.getElementById(e);if(null!=document.getElementsByClassName("highlight")[0]){var n=document.getElementsByClassName("highlight")[0].id;document.getElementById(n).classList.remove("highlight")}""!=e&&t.classList.add("highlight"),openAll()}$(document).ready(function(){setSeasons()});