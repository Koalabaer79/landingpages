var defaultYear="2020";function getMatches(e){$.getJSON("./assets/matches/"+e+".json",function(t){document.getElementById("playtable").innerHTML="";var s=[],a="";if(0!=t.length||""!=t.length){for(var n=0;n<t.length;n++)if(0!=t[n].length){a+="<div class='weekHead' onclick='showTable("+(n+1)+")'><h2>Week "+(n+1)+"</h2><img class='arrow' id='arrow"+(n+1)+"' src='./assets/icons/arrow.svg'></div><div class='week' id='week"+(n+1)+"'>";for(var i=0;i<t[n].length;i++){var l=0,o=0;for(k=0;k<5;k++)l+=parseInt(t[n][i].visitor.points[k]),o+=parseInt(t[n][i].home.points[k]);a+=0==l&&0==o?"<div class='match'><div class='full'>"+t[n][i].date+"</div><div class='half team'><img src='./assets/teams/logos/100x100/"+t[n][i].visitor.team+".png'><br />"+firstLetter(t[n][i].visitor.team)+"</div><div class='at'>@</div><div class='half team'><img src='./assets/teams/logos/100x100/"+t[n][i].home.team+".png'><br />"+firstLetter(t[n][i].home.team)+"</div></div>":"<div class='match'><div class='full'>"+t[n][i].date+"</div><div class='half team'><img src='./assets/teams/logos/100x100/"+t[n][i].visitor.team+".png'><br />"+firstLetter(t[n][i].visitor.team)+"</div><div class='at'>@</div><div class='half team'><img src='./assets/teams/logos/100x100/"+t[n][i].home.team+".png'><br />"+firstLetter(t[n][i].home.team)+"</div><div class='half standings'>"+l+"</div><div class='at'></div><div class='half standings'>"+o+"</div></div>"}a+="</div>"}s.push(a);for(n=0;n<s.length;++n)$(s[n]).appendTo("#playtable")}else{$("<h2> No Matches available - Season "+e+"-"+(e+1)+" did not start yet!</h2><p>You can watch the previous seasons instead.</p><p>Just click on the Dropdown-List under the headline and go throught the previous seasons!</p>").appendTo("#playtable")}})}function getTeamMatches(e,t){""==t?getMatches(e):$.getJSON("./assets/matches/"+e+".json",function(s){document.getElementById("playtable").innerHTML="";var a=[],n="";if(0!=s.length||""!=s.length){for(var i=0;i<s.length;i++){var l=!1;if(0!=s[i].length){n+="<div class='weekHead' onclick='showTable("+(i+1)+")'><h2>Week "+(i+1)+"</h2><img class='arrow' id='arrow"+(i+1)+"' src='./assets/icons/arrow.svg'></div><div class='week' id='week"+(i+1)+"'>";for(var o=0;o<s[i].length;o++)if(t==firstLetter(s[i][o].visitor.team)||t==firstLetter(s[i][o].home.team)){var r=0,d=0;for(k=0;k<5;k++)r+=parseInt(s[i][o].visitor.points[k]),d+=parseInt(s[i][o].home.points[k]);n+=0==r&&0==d?"<div class='match'><div class='full'>"+s[i][o].date+"</div><div class='half team'><img src='./assets/teams/logos/100x100/"+s[i][o].visitor.team+".png'><br />"+firstLetter(s[i][o].visitor.team)+"</div><div class='at'>@</div><div class='half team'><img src='./assets/teams/logos/100x100/"+s[i][o].home.team+".png'><br />"+firstLetter(s[i][o].home.team)+"</div></div>":"<div class='match'><div class='full'>"+s[i][o].date+"</div><div class='half team'><img src='./assets/teams/logos/100x100/"+s[i][o].visitor.team+".png'><br />"+firstLetter(s[i][o].visitor.team)+"</div><div class='at'>@</div><div class='half team'><img src='./assets/teams/logos/100x100/"+s[i][o].home.team+".png'><br />"+firstLetter(s[i][o].home.team)+"</div><div class='half standings'>"+r+"</div><div class='at'></div><div class='half standings'>"+d+"</div></div>",l=!0}0==l&&(n+='<div style="width:100%;text-align:center"><p>No match for <b>'+t+"</b> in <b>week "+(i+1)+"</b> availeble, yet. Data will be updated soon!</p></div>"),n+="</div>"}}a.push(n);for(i=0;i<a.length;++i)$(a[i]).appendTo("#playtable");openAll()}else{$("<h2> No Matches available - Season "+e+"-"+(e+1)+" did not start yet!</h2><p>You can watch the previous seasons instead.</p><p>Just click on the Dropdown-List under the headline and go throught the previous seasons!</p>").appendTo("#playtable")}})}function firstLetter(e){return e.replace(/^.{1}/g,e[0].toUpperCase())}function changeSeason(e){el=document.getElementById("playtable"),el.innerHTML="";var t=document.getElementById("filterSelect");t.setAttribute("onchange","getTeamMatches("+e+",this.value)"),t.selectedIndex=0,getMatches(e)}function setSeasons(){$.getJSON("./assets/seasons/seasons.json",function(e){var t,s,a,n,i,l,o,r,d=defaultYear,c='<option value="">Select Season</option>';$(c).appendTo("#year");for(var h=0;h<e.length;++h){var m="";d==e[h]&&(m="selected"),c='<option value="'+e[h]+'" '+m+">"+e[h]+"-"+(+e[h]+1)+"</option>",$(c).appendTo("#year")}for(a=(t=document.getElementsByClassName("custom-select")).length,h=0;h<a;h++){for(n=(i=t[h].getElementsByTagName("select")[0]).length,(l=document.createElement("DIV")).setAttribute("class","select-selected"),l.innerHTML=i.options[i.selectedIndex].innerHTML,t[h].appendChild(l),(o=document.createElement("DIV")).setAttribute("class","select-items select-hide"),s=1;s<n;s++)(r=document.createElement("DIV")).innerHTML=i.options[s].innerHTML,r.setAttribute("onclick","changeSeason('"+i.options[s].innerHTML.substring(0,4)+"')"),r.addEventListener("click",function(e){var t,s,a,n,i,l,o;for(l=(n=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,i=this.parentNode.previousSibling,s=0;s<l;s++)if(n.options[s].innerHTML==this.innerHTML){for(n.selectedIndex=s,i.innerHTML=this.innerHTML,o=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,a=0;a<o;a++)t[a].removeAttribute("class");this.setAttribute("class","same-as-selected");break}i.click()}),o.appendChild(r);t[h].appendChild(o),l.addEventListener("click",function(e){e.stopPropagation(),g(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function g(e){var t,s,a,n,i,l=[];for(t=document.getElementsByClassName("select-items"),s=document.getElementsByClassName("select-selected"),n=t.length,i=s.length,a=0;a<i;a++)e==s[a]?l.push(a):s[a].classList.remove("select-arrow-active");for(a=0;a<n;a++)l.indexOf(a)&&t[a].classList.add("select-hide")}document.addEventListener("click",g),createFilter(d),getMatches(d)})}function showTable(e){var t=document.getElementById("week"+e),s=document.getElementById("arrow"+e);"0px"==t.style.height||""==t.style.height?(t.style.height="auto",s.style.transform="rotate(-270deg)"):(t.style.height="0px",s.style.transform="rotate(-90deg)")}function showAll(){for(var e=document.getElementsByClassName("weekHead").length,t=1;t<=e;t++){var s=document.getElementById("week"+t),a=document.getElementById("arrow"+t),n=document.getElementById("unfold");"0px"==s.style.height||""==s.style.height?(s.style.height="auto",a.style.transform="rotate(-270deg)",n.innerHTML="Fold all"):(s.style.height="0px",a.style.transform="rotate(-90deg)",n.innerHTML="Unfold all")}}function openAll(){for(var e=document.getElementsByClassName("weekHead").length,t=1;t<=e;t++){var s=document.getElementById("week"+t),a=document.getElementById("arrow"+t),n=document.getElementById("unfold");s.style.height="auto",a.style.transform="rotate(-270deg)",n.innerHTML="Fold all"}}function createFilter(e){$.getJSON("./assets/teams/"+e+".json",function(t){for(var s='<select class="filter" id="filterSelect" onchange="getTeamMatches('+e+',this.value)"><option value="">... filter</option>',a=[],n=0;n<t.length;n++)a.push(t[n].name);a.sort();for(n=0;n<a.length;n++)s+='<option value="'+a[n]+'">'+a[n]+"</option>";s+="</select>",$(s).appendTo("#filter")})}$(document).ready(function(){setSeasons()});